{"version":3,"file":"js/264.df7727d5.js","mappings":"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","sources":["webpack://rbac_demo_front/./src/components/RoleView.vue","webpack://rbac_demo_front/src/components/RoleView.vue","webpack://rbac_demo_front/./src/components/RoleView.vue?6569","webpack://rbac_demo_front/./src/components/RoleView.vue?e8c7"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',[(_vm.hasAuth('role:add'))?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"新增角色\")]):_vm._e(),(_vm.hasAuth('role:del'))?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.delRole(null)}}},[_vm._v(\"批量删除\")]):_vm._e()],1),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"15px\"},attrs:{\"data\":_vm.tableData,\"border\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"msg\",\"label\":\"描述\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status)?_c('el-tag',{attrs:{\"size\":\"small\",\"type\":\"success\"}},[_vm._v(\"正常\")]):_c('el-tag',{attrs:{\"size\":\"small\",\"type\":\"danger\"}},[_vm._v(\"禁用\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"create_time\",\"label\":\"创建时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"mod\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.hasAuth('role:mod'))?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.modRole(scope.row.id)}}}):_vm._e(),(_vm.hasAuth('role:del'))?_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.delRole(scope.row.id)}}}):_vm._e()]}}])})],1),_c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.ruleForm.name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"name\", $$v)},expression:\"ruleForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色介绍\",\"prop\":\"msg\"}},[_c('el-input',{model:{value:(_vm.ruleForm.msg),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"msg\", $$v)},expression:\"ruleForm.msg\"}})],1),_c('el-form-item',{attrs:{\"label\":\"部门\",\"prop\":\"dept\"}},[_c('treeselect',{staticStyle:{\"width\":\"170px\"},attrs:{\"placeholder\":\"选择部门\",\"multiple\":true,\"flat\":true,\"options\":_vm.depts},model:{value:(_vm.ruleForm.depts),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"depts\", $$v)},expression:\"ruleForm.depts\"}})],1),_c('el-form-item',{attrs:{\"label\":\"菜单权限\",\"prop\":\"menu\"}},[_c('el-tree',{ref:\"permTree\",attrs:{\"data\":_vm.permTreeData,\"show-checkbox\":\"\",\"default-expand-all\":true,\"node-key\":\"id\",\"check-strictly\":true,\"props\":_vm.defaultProps},on:{\"check\":_vm.subRoleTreeCheck}})],1),_c('el-form-item',{attrs:{\"label\":\"是否启用\",\"prop\":\"status\"}},[_c('el-switch',{model:{value:(_vm.ruleForm.status),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"status\", $$v)},expression:\"ruleForm.status\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.handleClose}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRole}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div>\r\n      <el-button type=\"primary\" v-if=\"hasAuth('role:add')\" @click=\"dialogVisible = true\">新增角色</el-button>\r\n      <el-button type=\"danger\" v-if=\"hasAuth('role:del')\" @click=\"delRole(null)\">批量删除</el-button>\r\n    </div>\r\n    <el-table\r\n        :data=\"tableData\"\r\n        border\r\n        style=\"width: 100%;margin-top:15px\"\r\n        @selection-change=\"handleSelectionChange\">\r\n      <el-table-column\r\n          type=\"selection\"\r\n          width=\"55\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"name\"\r\n          label=\"名称\"\r\n          width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"msg\"\r\n          label=\"描述\"\r\n          width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"status\"\r\n          label=\"状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag size=\"small\" v-if=\"scope.row.status\" type=\"success\">正常</el-tag>\r\n          <el-tag size=\"small\" v-else type=\"danger\">禁用</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"create_time\"\r\n          label=\"创建时间\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"mod\"\r\n          label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\" circle v-if=\"hasAuth('role:mod')\"  @click=\"modRole(scope.row.id)\"></el-button>\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" circle v-if=\"hasAuth('role:del')\" @click=\"delRole(scope.row.id)\"></el-button>\r\n\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n\r\n    <el-dialog\r\n        :title=\"title\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\"\r\n        :before-close=\"handleClose\">\r\n      <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n        <el-form-item label=\"角色名\" prop=\"name\">\r\n          <el-input v-model=\"ruleForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色介绍\" prop=\"msg\">\r\n          <el-input v-model=\"ruleForm.msg\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"部门\" prop=\"dept\">\r\n          <treeselect\r\n              style=\"width: 170px\"\r\n              placeholder=\"选择部门\"\r\n              :multiple=\"true\"\r\n              :flat=\"true\"\r\n              v-model=\"ruleForm.depts\"\r\n              :options=\"depts\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"菜单权限\" prop=\"menu\">\r\n          <el-tree\r\n              :data=\"permTreeData\"\r\n              show-checkbox\r\n              ref=\"permTree\"\r\n              :default-expand-all=true\r\n              node-key=\"id\"\r\n              :check-strictly=true\r\n              @check=\"subRoleTreeCheck\"\r\n              :props=\"defaultProps\">\r\n          </el-tree>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否启用\" prop=\"status\">\r\n          <el-switch v-model=\"ruleForm.status\"></el-switch>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addRole\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport Treeselect from \"@riophae/vue-treeselect\";\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\n\r\nexport default {\r\n  name: \"RoleView\",\r\n  data() {\r\n    return {\r\n      title:'新增',\r\n      permTreeData: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'label'\r\n      },\r\n      depts: [],\r\n      tableData: [],\r\n      multipleSelection: [],\r\n      dialogVisible: false,\r\n      ruleForm: {\r\n        name: '',\r\n        msg: '',\r\n        depts: null,\r\n        menus: [],\r\n        status: true\r\n      },\r\n      rules: {\r\n        name: [\r\n          {required: true, message: '请输入角色名', trigger: 'blur'},\r\n          {min: 3, max: 5, message: '长度在 2 到 6 个字符', trigger: 'blur'}\r\n        ],\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    modRole(id) {\r\n      this.$axios.get(this.$settings.BASE_URL + '/permission/role/' + id + '/', {headers: {Authorization: this.$cookies.get('token')}}).then(res => {\r\n        this.ruleForm = res.data.data\r\n        this.title = '修改'\r\n        this.dialogVisible = true\r\n      })\r\n      setTimeout(() => {\r\n        this.$refs.permTree.setCheckedKeys(this.ruleForm.menus)\r\n      }, 100)\r\n\r\n    },\r\n    subRoleTreeCheck(keys, leafOnly) {\r\n      //获取所有选中的节点id\r\n      this.ruleForm.menus = this.$refs.permTree.getCheckedKeys().concat(this.$refs.permTree.getHalfCheckedKeys())\r\n    },\r\n    handleClose(done) {\r\n      this.$confirm('确认关闭？')\r\n          .then(_ => {\r\n            this.dialogVisible = false\r\n            // done();\r\n            this.ruleForm = {\r\n              name: '',\r\n              msg: '',\r\n              depts: null,\r\n              menus: [],\r\n              status: true\r\n            }\r\n            this.$refs.permTree.setCheckedKeys(this.ruleForm.menus)\r\n          })\r\n          .catch(_ => {\r\n          });\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n    },\r\n    getRole() {\r\n      this.$axios.get(this.$settings.BASE_URL + '/permission/role/', {headers: {Authorization: this.$cookies.get('token')}}).then(res => {\r\n        this.tableData = res.data.data.results\r\n      })\r\n    },\r\n    delRole(id) {\r\n      let ids = []\r\n      if (id) {\r\n        ids.push(id)\r\n      } else {\r\n        this.multipleSelection.forEach(row => {\r\n          ids.push(row.id)\r\n        })\r\n      }\r\n      this.$axios.post(this.$settings.BASE_URL + '/permission/role/del_roles/', {ids: ids}, {headers: {Authorization: this.$cookies.get('token'), Auth:'role:del'}}).then(res => {\r\n        this.$message({\r\n          showClose: true,\r\n          message: '删除成功',\r\n          type: 'success',\r\n          onClose: () => {\r\n            this.getRole()\r\n          }\r\n        })\r\n      })\r\n    },\r\n    addRole() {\r\n      let axios_type = this.$axios.post\r\n      if (this.ruleForm.id) {\r\n        axios_type = this.$axios.put\r\n      }\r\n      axios_type(this.$settings.BASE_URL + '/permission/role/' + (this.ruleForm.id ? this.ruleForm.id + '/' : ''), this.ruleForm, {headers: {Authorization: this.$cookies.get('token'),Auth:(this.ruleForm.id ? 'role:mod' : 'role:add')}}).then(res => {\r\n        if (res.data.code === 100) {\r\n          this.$message({\r\n            showClose: true,\r\n            message: '操作成功',\r\n            type: 'success',\r\n            onClose: () => {\r\n              this.getRole()\r\n              this.dialogVisible = false\r\n              this.ruleForm = {\r\n                name: '',\r\n                msg: '',\r\n                depts: null,\r\n                menus: [],\r\n                status: true\r\n              }\r\n              this.$refs.permTree.setCheckedKeys(this.ruleForm.menus)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.getRole()\r\n    this.$axios.get(this.$settings.BASE_URL + '/permission/dept/all_dept/', {headers: {Authorization: this.$cookies.get('token')}}).then(res => {\r\n      this.depts = res.data.data.results\r\n    })\r\n    this.$axios.get(this.$settings.BASE_URL + '/permission/menu/all_menu/', {headers: {Authorization: this.$cookies.get('token')}}).then(res => {\r\n      this.permTreeData = res.data.data\r\n    })\r\n  },\r\n  components: {\r\n    Treeselect\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RoleView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RoleView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleView.vue?vue&type=template&id=e327cc86&scoped=true&\"\nimport script from \"./RoleView.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e327cc86\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","hasAuth","attrs","on","$event","dialogVisible","_v","_e","delRole","staticStyle","tableData","handleSelectionChange","scopedSlots","_u","key","fn","scope","row","status","modRole","id","title","handleClose","ref","staticClass","ruleForm","rules","model","value","name","callback","$$v","$set","expression","msg","depts","permTreeData","defaultProps","subRoleTreeCheck","slot","addRole","staticRenderFns","data","children","label","multipleSelection","menus","required","message","trigger","min","max","methods","$axios","get","$settings","BASE_URL","headers","Authorization","$cookies","then","res","setTimeout","$refs","permTree","setCheckedKeys","keys","leafOnly","getCheckedKeys","concat","getHalfCheckedKeys","done","$confirm","_","catch","val","getRole","results","ids","push","forEach","post","Auth","$message","showClose","type","onClose","axios_type","put","code","created","components","Treeselect","component"],"sourceRoot":""}